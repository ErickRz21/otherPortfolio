---
import Navbar from "../components/Navbar.astro";
import Layout from "../layouts/Layout.astro";
import Skills from "../components/Skills.astro";
import Work from "../components/Work.astro";

// Welcome to Astro! Wondering what to do next? Check out the Astro documentation at https://docs.astro.build
// Don't want to use any of this? Delete everything in this file, the `assets`, `components`, and `layouts` directories, and start fresh.
---

<Layout>
  <div class="main" id="home">
    <Navbar />
    <div class="gif">
      <img alt="RaccoonSpaceGif" src="/space.webp" />
    </div>
    <section class="main__container" tabindex="-1">
      <h1 class="pb-6">Milky-Way</h1>
      <span class="badge">Software Engineer</span>
      <h2>About</h2>
      <p>
        Praesent malesuada mi nisi, quis tempus magna venenatis ut. Suspendisse
        tempor sem at scelerisque congue. Curabitur mollis, mi id molestie
        finibus, metus sem sagittis nunc, euismod feugiat orci neque non lorem.
        Aenean sollicitudin erat eu molestie tempus. Nunc ac eros elementum,
        fermentum lacus at, pellentesque mauris. Suspendisse eros neque,
        interdum euismod consectetur convallis, porttitor at massa. Phasellus a
        ultrices arcu. Donec viverra, lorem in pellentesque euismod, libero
        justo gravida nibh, non ultricies justo purus ultrices est.
      </p>
      <p>
        Ut at interdum dui. Donec ut ante ex. Maecenas id ex eget nibh consequat
        accumsan. Proin semper semper dui nec feugiat. Donec cursus neque id
        aliquet finibus. Morbi facilisis turpis nibh, nec dictum orci dictum
        nec. In hac habitasse platea dictumst. Maecenas mollis turpis vitae
        turpis bibendum, vitae tristique arcu eleifend.
      </p>
      <h2>Skills</h2>
      <div class="skills">
        <Skills />
      </div>
      <h2>Interests</h2>
      <p>
        Ut at interdum dui. Donec ut ante ex. Maecenas id ex eget nibh consequat
        accumsan. Proin semper semper dui nec feugiat. Donec cursus neque id
        aliquet finibus. Morbi facilisis turpis nibh, nec dictum orci dictum
        nec. In hac habitasse platea dictumst. Maecenas mollis turpis vitae
        turpis bibendum, vitae tristique arcu eleifend.
      </p>
    </section>
    <div class="work">
      <Work />
    </div>
  </div>
  <script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
      // Animate elements inside the main container
      const mainContainer = document.querySelector(".main__container");
      const workSection = document.querySelector(".work");
      const skillsSection = document.querySelector(".skills");

      gsap.from(mainContainer, {
        opacity: 0,
        y: 50,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: mainContainer,
          start: "top 80%", // Animation starts when the element's top is 80% from the top of the viewport
          end: "top 30%", // Animation ends when the element's top is 30% from the top
          scrub: true, // Smoothly animate as user scrolls
        },
      });

      // Additional animations for each section
      gsap.from(".main__container h1, .main__container h2, .gif", {
        opacity: 0,
        y: -30,
        stagger: 0.3,
        duration: 0.8,
        scrollTrigger: {
          trigger: mainContainer,
          start: "top 85%",
          end: "top 40%",
          toggleActions: "play none none reverse", // Play the animation and reverse it on scroll
        },
      });

      gsap.from(".main__container p, .skills", {
        opacity: 0,
        y: 30,
        stagger: 0.2,
        duration: 0.8,
        scrollTrigger: {
          trigger: mainContainer,
          start: "top 85%",
          end: "top 40%",
          toggleActions: "play none none reverse",
        },
      });

      gsap.from(workSection, {
        opacity: 0,
        y: 50,
        duration: 3,
        ease: "power2.out",
        scrollTrigger: {
          trigger: workSection, // Element to trigger the animation
          start: "top 80%", // When the element's top is 80% from the top of the viewport
          end: "top 50%", // When the element's top reaches 50% from the top
          scrub: true, // Smooth scrolling animation
        },
      });
    });
  </script>
</Layout>
